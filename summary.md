# Servicemesh 2018 年度总结

## 前言

在2017年年底，在Service Mesh刚刚兴起之时，应InfoQ的邀请撰写过一篇名为 [[Service Mesh年度总结：群雄逐鹿烽烟起](https://skyao.io/publication/201801-service-mesh-2017-summary/)](https://skyao.io/publication/201801-service-mesh-2017-summary/) 的文章，对2017年Service Mesh的发展做了一次年度回顾。当时正是Service Mesh技术方兴未艾，各家产品你争我夺之时，一片欣欣向荣的气象。

时隔一年，江湖风云变幻。再次有幸收到InfoQ的邀请，继续进行Service Mesh2018年的年度总结。本次年度总结将由 [Servicemesher 社区](http://www.servicemesher.com/) 的多位嘉宾共襄盛举，希望能为Service Mesh2018年的发展做一个系统而全面的总结。

为了更有成效的完成总结，我们将以询问的方式来让下文中将出场的各个Service Mesh产品和解决方案提供自己的答案，问题很简单：**在2018年，做了什么？**

考虑到在2018年，Service Mesh在国内大热，有多家公司推出自己的Service Mesh产品和方案，因此本次内容我们将分为国际篇和国内篇。

## 国际篇

2018年，Service Mesh市场的主要竞争者还是2017年底的出场的Linkerd、Envoy、Istio、Conduit等。

### Istio

2018年对于 Istio 来说应该是蓄势待发的一年，这一年 Istio 接连发布了 0.5、0.6、0.7、0.8 和 1.0 版本。

到2018 年 7 月 31日 1.0 GA 时，Istio其实已经陆续开发了近两年。1.0 版本对 Istio 来说是一个重要的里程碑，官方宣称所有的[核心功能](https://preliminary.istio.io/zh/about/feature-stages/)现在都可以用于生产。1.0 版本的到来也意味着其基本架构和 API 逐渐稳定，那些锐意创新的企业可以开始试用了。

我们以 GitHub 上的 Star 数量的角度来看一下 Istio 在2018年的受欢迎程度。下图显示的 Istio 的 GitHub star 数量随时间变化曲线。可以看到在2018年，Istio 的star 数量增长了大概一万颗，目前已经接近15000颗星，其增长趋势非常平稳。

[![Stargazers over time](https://starcharts.herokuapp.com/istio/istio.svg)](https://starcharts.herokuapp.com/istio/istio)

我们来按照时间顺序回顾一下2018年Istio的几个重要版本的发布情况，以便对Istio这个目前最受关注的Service Mesh在2018年的发展有深入了解：

- 2018年1月31日，发布0.5.0版本：支持Sidecar自动注入（需要 kubernets 1.9版本），加强RBAC支持，尝试修改通信规则
- 2018年3月1日，发布0.6.0版本：支持发送自定义Envoy配置给Proxy，支持基于Redis的速率限制，容许为检查和报告分别设置Mixer集群，提供正式的存活以及就绪检测功能
- 2018年3月29日，发布0.7.0版本：只包含问题修复和性能提升，没有新的功能。初步支持 v1alpha3 版本的流量管理功能。
- 2018年6月1日，发布0.8.0版本：在之前三个平淡无奇的小版本发布之后，Istio迎来了2018年第一个重大版本0.8.0，这也是Istio第一个LTS（长期支持）版本，这个版本带来了大量的更新，架构方面也做了很多改进，主要有：v1alpha3 版本的流量管理功能就绪；缺省使用Envoy的ADS API进行配置发送；新增Istio Gateway模型，不再支持Kubernetes Ingress；支持Helm安装；支持按需安装Mixer和Citadel模块。另外原有的 API 都经过了重构，CRD 的名字全部更改。
- 2018年7月31日，发布1.0.0版本：这是社区期待已经的版本，也是Istio的重要里程碑。不过相对0.8.0版本，主要是修复错误和提高性能，新功能不多。

进入2018年下半年之后，Istio的开发进度明显放缓，1.1版本的发布多次推迟，直到2018年结束也未能发布。在1.0版本发布之后的5个月时间，Istio只是以平均每个月一个Patch版本的方式陆续发布了1.0.1到1.0.5总共5个Patch版本，这些Patch版本都只有错误修复和性能改善，未带来新的特性。

简单总结Istio 2018年的发布情况：Istio在上半年通过0.5.0/0.6.0/0.7.0三个小版本陆续进行了小改，在0.8.0中进行了唯一一次大改，然后年中发布了2018年最重要的里程碑1.0.0版本，接着是长达5个月的修整期，最后带着迟迟未能发布1.1版本的小遗憾平淡的结束2018。

和产品演进和版本发布的平淡相比，Istio在市场和社区的接受程度方面表现非常火爆，成为2018年最热门的项目之一，也在各种技术会议上成为备受关注的新星。尤其在 kubernets 社区，更是被视为有望继 kubernets 成功之后成为下一个现象级产品。

目前各主流云平台也纷纷提供对 Istio 的支持：

- TODO

在市场一片红红火火之时，我们不得不指出，到2018年底，Istio 依然在几个关键问题上未能给出足够令人满意的答案，典型如性能、稳定性，Istio 的 1.0 版本也并不是一个有足够工业强度的稳定版本。Istio在2018年交出的答案，对于对Istio抱有非常大期待的 Servicemesh 社区来说，是远远不够的。这直接导致 Istio 目前在生产落地上陷入尴尬境地：虽然试水 Istio 的公司非常多，但是真正大规模的实践很少。

对Istio的年度总结，首先回答问题：Istio 在2018年如期发布了1.0版本，顺利完成了市场布局，扩大了己方阵营，压制了所有竞争对手。不可谓不成功，但是离社区的期待依然有非常大的距离，关键在于未能真正实现大规模普及。如何打破这一叫好不叫座的僵局，将会是 Istio 2019年面临的最大挑战。

### Envoy

### Linkerd系列

### 其他产品

### 衍生产品

### 小结

## 国内篇

### 蚂蚁金服

### 新浪微博

### 华为

### 腾讯

### 衍生产品

### 小结

## 总结